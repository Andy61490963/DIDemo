@using ClassLibrary
@using Microsoft.AspNetCore.Mvc.Rendering
@model List<FormFieldValidationRuleDto>
@{
    var options = ViewData["ValidationTypeOptions"] as List<SelectListItem> ?? EnumExtensions.ToSelectList<ValidationType>();
}

@if (Model.Any())
{
    foreach (var rule in Model)
    {
        <tr data-id="@rule.ID">
            <td>
                <select class="form-select form-select-sm validation-type"
                        name="VALIDATION_TYPE"
                        disabled>
                    @foreach (var item in options)
                    {
                        var selected = item.Value == rule.VALIDATION_TYPE ? "selected" : null;
                        <option value="@item.Value" selected="@selected">@item.Text</option>
                    }
                </select>
            </td>
            <td>
                <input class="form-control form-control-sm validation-value"
                       name="VALIDATION_VALUE"
                       value="@rule.VALIDATION_VALUE"
                       disabled />
            </td>
            <td>
                <input class="form-control form-control-sm" name="MESSAGE_ZH" value="@rule.MESSAGE_ZH" disabled/>
            </td>
            <td>
                <input class="form-control form-control-sm" name="MESSAGE_EN" value="@rule.MESSAGE_EN" disabled/>
            </td>
            <td>
                <input class="form-control form-control-sm" name="VALIDATION_ORDER" value="@rule.VALIDATION_ORDER"
                       type="number" disabled/>
            </td>
            <td>
                <div class="d-flex gap-1">
                    <button type="button" class="btn btn-sm btn-outline-primary edit-rule">編輯</button>
                    <button type="button" class="btn btn-sm btn-outline-success save-rule d-none">儲存</button>
                    <button type="button" class="btn btn-sm btn-outline-danger delete-rule">刪除</button>
                </div>
            </td>
        </tr>
    }
}
else
{
    <tr>
        <td colspan="6" class="text-center text-muted">尚無驗證規則</td>
    </tr>
}