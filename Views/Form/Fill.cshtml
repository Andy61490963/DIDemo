@model FormFillViewModel

<h2>@Model.Form.FormName</h2>
<p>@Model.Form.Description</p>

<form asp-action="Submit" method="post">
    <input type="hidden" name="FormId" value="@Model.Form.FormId" />

    @foreach (var field in Model.Fields.OrderBy(f => f.FieldOrder))
    {
        <div class="form-group mb-3">
            <label class="form-label">@field.FieldLabel</label>

            @switch (field.FieldType)
            {
                case "text":
                    <input name="@field.FieldKey" class="form-control" value="@field.DefaultValue" required="@(field.IsRequired)" />
                    break;

                case "textarea":
                    <textarea name="@field.FieldKey" class="form-control" required="@(field.IsRequired)">@field.DefaultValue</textarea>
                    break;

                case "select":
                    var opts = System.Text.Json.JsonSerializer.Deserialize<List<Option>>(field.FieldOptions ?? "[]");
                    <select name="@field.FieldKey" class="form-control" required="@(field.IsRequired)">
                        @foreach (var opt in opts)
                        {
                            <option value="@opt.value" selected="@(opt.value == field.DefaultValue)">@opt.label</option>
                        }
                    </select>
                    break;

                case "checkbox":
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" name="@field.FieldKey" value="true" id="chk_@field.FieldKey" />
                        <label class="form-check-label" for="chk_@field.FieldKey">@field.Placeholder</label>
                    </div>
                    break;

                case "date":
                    <input type="date" name="@field.FieldKey" class="form-control" value="@field.DefaultValue" required="@(field.IsRequired)" />
                    break;

                default:
                    <input name="@field.FieldKey" class="form-control" />
                    break;
            }
        </div>
    }

    <button type="submit" class="btn btn-primary">提交</button>
</form>